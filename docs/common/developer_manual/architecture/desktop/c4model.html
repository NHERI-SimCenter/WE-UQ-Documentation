

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>2.2. C4 Model of the SimCenter Ecosystem &mdash; Wind Engineering with Uncertainty Quantification  documentation</title>
      <link rel="stylesheet" type="text/css" href="../../../../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../../../../_static/css/theme.css?v=66b6668b" />
      <link rel="stylesheet" type="text/css" href="../../../../_static/copybutton.css?v=76b2166b" />
      <link rel="stylesheet" type="text/css" href="../../../../_static/tabs.css?v=a5c4661c" />
      <link rel="stylesheet" type="text/css" href="../../../../_static/sphinx-design.min.css?v=95c83b7e" />
      <link rel="stylesheet" type="text/css" href="../../../../_static/sphinxcontrib-images/LightBox2/lightbox2/dist/css/lightbox.css?v=5c84f910" />
      <link rel="stylesheet" type="text/css" href="../../../../_static/css/custom.css?v=4b5bf716" />

  
      <script src="../../../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../../../_static/documentation_options.js?v=5929fcd5"></script>
      <script src="../../../../_static/doctools.js?v=9a2dae69"></script>
      <script src="../../../../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="../../../../_static/clipboard.min.js?v=a7894cd8"></script>
      <script src="../../../../_static/copybutton.js?v=f281be69"></script>
      <script src="../../../../_static/design-tabs.js?v=36754332"></script>
      <script src="../../../../_static/sphinxcontrib-images/LightBox2/lightbox2/dist/js/lightbox-plus-jquery.min.js?v=ffc8af2d"></script>
      <script src="../../../../_static/sphinxcontrib-images/LightBox2/lightbox2-customize/jquery-noconflict.js?v=12818e64"></script>
    <script src="../../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
    <link rel="next" title="2.3. Backend Applications" href="backendApplications.html" />
    <link rel="prev" title="2.1. Software Architecture" href="overview.html" />
<script src="https://cdn.jsdelivr.net/npm/vega@5.12.1"></script>
<script src="https://cdn.jsdelivr.net/npm/vega-lite@4.13.1"></script>
<script src="https://cdn.jsdelivr.net/npm/vega-embed@6.8.0"></script>
<style media="screen">.vega-actions a {margin-right: 5px;}</style>
<link href="../../../../_static/css/bootstrap.css" rel="stylesheet">

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #F2F2F2" >
<a href="https://simcenter.designsafe-ci.org/" style="margin-bottom: 0px;">
  <img src="../../../../_static/img/SimCenter-Only.png" class="logo" alt="Org-Logo" />
</a>
<hr style="margin: 0px;">

  <a href="../../../../index.html" class="icon icon-home"> Wind Engineering with Uncertainty Quantification



</a>




<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>


        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">About</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../user_manual/about/WEUQ/about.html">1. About</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../front-matter/desktop/ack.html">2. Acknowledgments</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../front-matter/license.html">3. Copyright and License</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../front-matter/cite.html">4. How To Cite</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../user_manual/releases/weCapabilities.html">5. Capabilities</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../user_manual/releases/weReleaseNotes.html">6. Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../user_manual/releases/wePlans.html">7. Release Plans</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../front-matter/glossary.html">8. Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../front-matter/abbreviations.html">9. Abbreviations</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">User Manual</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../user_manual/installation/desktop/installation.html">1. Running Application</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../user_manual/usage/desktop/usage.html">2. User Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../user_manual/usage/desktop/wind/tools.html">3. Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../user_manual/examples/desktop/examples.html">4. Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../user_manual/usage/desktop/jobs.html">5. Jobs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../user_manual/troubleshooting/desktop/troubleshooting.html">6. Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../reqments/WEUQ.html">7. Requirements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../user_manual/bugs.html">8. Bugs &amp; Feature Requests</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Technical Manual</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../technical_manual/desktop/uqTechnical.html">1. Dakota Methods</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../technical_manual/desktop/damping.html">2. Damping Options</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../technical_manual/desktop/WEUQ/scalingWindTunnelData.html">3. Scaling Wind Tunnel Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../technical_manual/desktop/WEUQ/TinF.html">4. Turbulence Inflow</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../technical_manual/desktop/WEUQ/dataInformedStochasticWind.html">5. Wind-tunnel informed stochastic wind load</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Developer Manual</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../how_to_build/desktop/how_to_build.html">1. How to Build</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../how_to_extend.html">2. How to Extend</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="overview.html">2.1. Software Architecture</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">2.2. C4 Model of the SimCenter Ecosystem</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#level-1-context-diagram">2.2.1. Level 1: Context Diagram</a></li>
<li class="toctree-l3"><a class="reference internal" href="#level-2-container-diagram">2.2.2. Level 2: Container Diagram</a></li>
<li class="toctree-l3"><a class="reference internal" href="#level-3-component-diagram">2.2.3. Level 3: Component Diagram</a></li>
<li class="toctree-l3"><a class="reference internal" href="#level-4-code-diagram">2.2.4. Level 4: Code Diagram</a></li>
<li class="toctree-l3"><a class="reference internal" href="#uml-ee-uq">2.2.5. UML EE-UQ</a></li>
<li class="toctree-l3"><a class="reference internal" href="#uml-we-uq">2.2.6. UML WE-UQ</a></li>
<li class="toctree-l3"><a class="reference internal" href="#uml-hydrouq">2.2.7. UML HydroUQ</a></li>
<li class="toctree-l3"><a class="reference internal" href="#uml-pbe">2.2.8. UML PBE</a></li>
<li class="toctree-l3"><a class="reference internal" href="#uml-earthquakeevents">2.2.9. UML EarthquakeEvents</a></li>
<li class="toctree-l3"><a class="reference internal" href="#uml-windevents">2.2.10. UML WindEvents</a></li>
<li class="toctree-l3"><a class="reference internal" href="#uml-hydroevents">2.2.11. UML HydroEvents</a></li>
<li class="toctree-l3"><a class="reference internal" href="#uml-simcentercommon">2.2.12. UML SimCenterCommon</a></li>
<li class="toctree-l3"><a class="reference internal" href="#uml-simcenterbackendapplications">2.2.13. UML SimCenterBackendApplications</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="backendApplications.html">2.3. Backend Applications</a></li>
<li class="toctree-l2"><a class="reference internal" href="file-types.html">2.4. File Types and Schemas</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../coding_style/desktop/coding_style.html">2.5. Coding Style</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../verification/desktop/verification.html">3. Verification</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #F2F2F2" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">Wind Engineering with Uncertainty Quantification</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../how_to_extend.html"><span class="section-number">2. </span>How to Extend</a></li>
          <li class="breadcrumb-item"><a href="architecture.html">&lt;no title&gt;</a></li>
      <li class="breadcrumb-item active"><span class="section-number">2.2. </span>C4 Model of the SimCenter Ecosystem</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../../_sources/common/developer_manual/architecture/desktop/c4model.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="c4-model-of-the-simcenter-ecosystem">
<span id="lblc4model"></span><h1><span class="section-number">2.2. </span>C4 Model of the SimCenter Ecosystem<a class="headerlink" href="#c4-model-of-the-simcenter-ecosystem" title="Link to this heading"></a></h1>
<p>The SimCenter workflow systems are aimed at facilitating the use, reuse and extension of common workflows encountered in NHE by a broad range of natural hazards engineering researchers with varying levels of software skills. In order to encourage this use and adoption, this chapter presents the software architecture for the SimCenter framework and WE-UQ app using the <a class="reference external" href="https://c4model.com">C4 model</a>. The C4 model is a graphical approach for documenting software architecture through diagrams that describe and communicate the software architecture at different levels of abstraction. It is a top-down approach that starts at a high level (level 1) showing how a user would interact with the software and drills down through three more levels, with level 4 containing the typical UML diagrams. The choice of the <strong>C4</strong> model was made to provide NHE researchers with a diverse range of software architecture knowledge and an understanding of the software architecture behind SimCenter applications that fit their skill level. These four levels are as follows:</p>
<p>The SimCenter scientific workflow systems aim to facilitate the use, reuse, and extension of common workflows encountered in NHE by a broad range of natural hazards engineering researchers with varying software skills. This chapter presents the software architecture for the SimCenter framework and WE-UQ app using the <a class="reference external" href="https://c4model.com">C4 model</a> to encourage this use and adoption. The <strong>C4</strong> model is a graphical approach for documenting software architecture through diagrams describing and communicating the software architecture at various levels of abstraction. It is a top-down approach that starts at a high level (level 1), showing how a user would interact with the software, and drills down through three more levels, with level 4 containing comprehensive UML diagrams. The <strong>C4</strong> model was chosen to provide NHE researchers with a diverse range of software architecture knowledge to understand the software architecture behind SimCenter applications that fit their skill level. The four levels are as follows:</p>
<ul class="simple">
<li><p>Level 1: The level one diagram is a system diagram that shows how the software system fits in the real world in terms of people who use it and other software systems it interacts with.</p></li>
<li><p>Level 2: Level 2 is a container diagram showing the containers (applications, databases, etc.) that make up the software system.</p></li>
<li><p>Level 3: Level three diagrams are component diagrams, showing how the components of the individual containers.</p></li>
<li><p>Level 4: The level four diagrams show how the individual components are implemented. They are typically UML class diagrams.</p></li>
</ul>
<nav class="contents local" id="table-of-contents">
<p class="topic-title">Table of Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#level-1-context-diagram" id="id11">Level 1: Context Diagram</a></p></li>
<li><p><a class="reference internal" href="#level-2-container-diagram" id="id12">Level 2: Container Diagram</a></p></li>
<li><p><a class="reference internal" href="#level-3-component-diagram" id="id13">Level 3: Component Diagram</a></p></li>
<li><p><a class="reference internal" href="#level-4-code-diagram" id="id14">Level 4: Code Diagram</a></p></li>
<li><p><a class="reference internal" href="#uml-ee-uq" id="id15">UML EE-UQ</a></p></li>
<li><p><a class="reference internal" href="#uml-we-uq" id="id16">UML WE-UQ</a></p></li>
<li><p><a class="reference internal" href="#uml-hydrouq" id="id17">UML HydroUQ</a></p></li>
<li><p><a class="reference internal" href="#uml-pbe" id="id18">UML PBE</a></p></li>
<li><p><a class="reference internal" href="#uml-earthquakeevents" id="id19">UML EarthquakeEvents</a></p></li>
<li><p><a class="reference internal" href="#uml-windevents" id="id20">UML WindEvents</a></p></li>
<li><p><a class="reference internal" href="#uml-hydroevents" id="id21">UML HydroEvents</a></p></li>
<li><p><a class="reference internal" href="#uml-simcentercommon" id="id22">UML SimCenterCommon</a></p></li>
<li><p><a class="reference internal" href="#uml-simcenterbackendapplications" id="id23">UML SimCenterBackendApplications</a></p></li>
</ul>
</nav>
<section id="level-1-context-diagram">
<span id="lblc4model1"></span><h2><span class="section-number">2.2.1. </span>Level 1: Context Diagram<a class="headerlink" href="#level-1-context-diagram" title="Link to this heading"></a></h2>
<p>A Level 1 diagram in <a class="reference internal" href="#c4model-figcontext"><span class="std std-numref">Fig. 2.2.1.1</span></a> shows the system context for the SimCenter applications, i.e. how it fits in the world. In the diagram:</p>
<ul class="simple">
<li><p>the SimCenter computational applications (EE-UQ, WE-UQ, PBE, R2D) are shown in the center surrounded by the user and the systems it interacts with.</p></li>
<li><p>input data for the SimCenter applications can be obtained either from NHERI datasets accessible on the DesignSafe <a class="reference external" href="https://www.designsafe-ci.org/data/browser/public/designsafe.storage.community/">Data Depot</a>, shown to the right, or from web-based databases, shown to the left.</p></li>
<li><p>the SimCenter applications can then be run in conjunction with open-source software applications (such as Dakota, FEAP, OpenSees, Python, OpenFOAM, etc.) either on a local desktop, shown below, or using HPC resources on <a class="reference external" href="https://designsafe-ci.org">DesignSafe</a>, shown to the right.</p></li>
</ul>
<figure class="align-center" id="c4model-figcontext">
<a class="reference internal image-reference" href="../../../../_images/context.png"><img alt="../../../../_images/context.png" src="../../../../_images/context.png" style="width: 800px;" />
</a>
<figcaption>
<p><span class="caption-number">Fig. 2.2.1.1 </span><span class="caption-text">System context diagram for SimCenter applications.</span><a class="headerlink" href="#c4model-figcontext" title="Link to this image"></a></p>
</figcaption>
</figure>
</section>
<section id="level-2-container-diagram">
<span id="lblc4model2"></span><h2><span class="section-number">2.2.2. </span>Level 2: Container Diagram<a class="headerlink" href="#level-2-container-diagram" title="Link to this heading"></a></h2>
<p>A Level 2 diagram in <a class="reference internal" href="#c4model-figcontainer"><span class="std std-numref">Fig. 2.2.2.1</span></a> demonstrates how the SimCenter applications are broken into high-level containers (applications, databases, etc.). Each of the SimCenter applications is broken into two components: A front-end UI and a back-end application that runs the workflow. The front-end is a desktop application written using the cross-platform <a class="reference external" href="https://www.qt.io/product/framework">Qt framework</a>. The back-end is an application that processes the input from the front-end, which comes in the form of a JSON file, creates a workflow and runs it. The workflow applications, written in Python, C, or C++, utilize existing applications where possible and run on either the local desktop machine or on an HPC utilizing resources made available to NHE community through DesignSafe.</p>
<figure class="align-center" id="c4model-figcontainer">
<a class="reference internal image-reference" href="../../../../_images/container.png"><img alt="../../../../_images/container.png" src="../../../../_images/container.png" style="width: 800px;" />
</a>
<figcaption>
<p><span class="caption-number">Fig. 2.2.2.1 </span><span class="caption-text">System container diagram for SimCenter applications.</span><a class="headerlink" href="#c4model-figcontainer" title="Link to this image"></a></p>
</figcaption>
</figure>
</section>
<section id="level-3-component-diagram">
<span id="lblc4model3"></span><h2><span class="section-number">2.2.3. </span>Level 3: Component Diagram<a class="headerlink" href="#level-3-component-diagram" title="Link to this heading"></a></h2>
<p>Two level 3 diagrams are now presented which break up the two containers into the major building blocks or
components in C4 terminology. In <a class="reference internal" href="#c4model-figcomponentfront"><span class="std std-numref">Fig. 2.2.3.1</span></a> the component diagram for the front-end UI is presented. It outlines the interaction between the user and the individual graphical elements (widgets) of the UI. Given the analogy of a jigsaw puzzle, the user selects which piece of the jigsaw puzzle they are working on in the component selection widget. The widget for the jigsaw piece will then be displayed on the desktop. The user for each jigsaw piece then selects which application to run for that piece, and for the chosen application, they provide the inputs. When the inputs are all provided, the user can select to run the simulations locally or remotely. For jobs that run remotely, the user can download and review previously run simulations. As seen the widgets may subsequently interact with web services through HTTPS requests, or with DesignSafe utilizing TAPIS Restful API through the RemoteService container.</p>
<figure class="align-center" id="c4model-figcomponentfront">
<a class="reference internal image-reference" href="../../../../_images/componentFront.png"><img alt="../../../../_images/componentFront.png" src="../../../../_images/componentFront.png" style="width: 800px;" />
</a>
<figcaption>
<p><span class="caption-number">Fig. 2.2.3.1 </span><span class="caption-text">Component diagram for front end UI.</span><a class="headerlink" href="#c4model-figcomponentfront" title="Link to this image"></a></p>
</figcaption>
</figure>
<p>The component diagram for the backend application shown in <a class="reference internal" href="#c4model-figcomponentback"><span class="std std-numref">Fig. 2.2.3.2</span></a>, shows that the backend is made up of a number of component applications. The application <code class="docutils literal notranslate"><span class="pre">femUQ.py</span></code> is the application that parses the input from the front end, sets up the workflow by creating a <code class="docutils literal notranslate"><span class="pre">workflow_driver</span></code> script and then launches the UQ engine. Which UQ Engine and which applications to run in the workflow, is determined from the data passed from the UI and information contained in a file, <code class="docutils literal notranslate"><span class="pre">WorkflowApplication.json</span></code>. The <code class="docutils literal notranslate"><span class="pre">WorkflowApplication.json</span></code> file is a file that maps the applications specified in the output from the UI with a specific application contained on the user’s local machine or at the remote HPC resource, as such it allows the researchers to modify the applications that may be run in the workflow w/o the need to recompile the application. Once the <code class="docutils literal notranslate"><span class="pre">workflow_driver</span></code> file is created, control is passed to a UQ engine, which repeatedly runs the <code class="docutils literal notranslate"><span class="pre">workflow_driver</span></code> to generate the results. In running the workflow some of the applications will invoke applications not developed to meet the API. For such applications, pre- and post-processors are provided. The figure shows the backend application running locally or remotely on an HPC at DesignSafe.</p>
<figure class="align-center" id="c4model-figcomponentback">
<a class="reference internal image-reference" href="../../../../_images/componentBack.png"><img alt="../../../../_images/componentBack.png" src="../../../../_images/componentBack.png" style="width: 800px;" />
</a>
<figcaption>
<p><span class="caption-number">Fig. 2.2.3.2 </span><span class="caption-text">Component diagram for Backend Application.</span><a class="headerlink" href="#c4model-figcomponentback" title="Link to this image"></a></p>
</figcaption>
</figure>
</section>
<section id="level-4-code-diagram">
<span id="lblc4model4"></span><h2><span class="section-number">2.2.4. </span>Level 4: Code Diagram<a class="headerlink" href="#level-4-code-diagram" title="Link to this heading"></a></h2>
<p>To facilitate the development of the different SimCenter applications and to encourage their reuse and extension by other NHE researchers, the SimCenter is providing the NHE community with a software framework for building such applications. From this framework, the SimCenter is building the applications, of which WE-UQ app is but one, that it releases. These individual applications are built from the components of the framework. The components of the SimCenter are grouped, as shown in the figure below, into the following components:</p>
<ol class="arabic simple">
<li><p><strong>Cloud</strong>: applications/libraries for communicating with remote web services to launch and monitor applications on HPC resources and to upload and download files from the filesystems of such resources.</p></li>
<li><p><strong>UQ</strong>: applications for performing sampling, sensitivity, reliability and optimization methods.</p></li>
<li><p><strong>SAM</strong>: applications for creating a finite element model of the building asset.</p></li>
<li><p><strong>EVENT</strong>: applications for creating loads on the building asset given a natural hazard event.</p></li>
<li><p><strong>FEM</strong>: application for determining the response parameter of the building asset given applied loads.</p></li>
<li><p><strong>DL</strong>: application to determine the damage and loss to the building asset given the event.</p></li>
<li><p><strong>EDP</strong>: application to determine the response parameter given the event, building asset, and damage and loss application.</p></li>
<li><p><strong>BRAILS</strong>: a framework of applications for creating regional-level building inventories using machine learning.</p></li>
<li><p><strong>Databases</strong>; contain information on building inventories for regional simulations, consequence functions for the DL applications, and experimental and corresponding simulation models for future machine learning-based AI algorithms.</p></li>
</ol>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><code class="docutils literal notranslate"><span class="pre">femUQ.py</span></code> is the backend application for the EE-UQ, WE-UQ, Hydro-UQ, and PBE applications. For R2D the backend application is <code class="docutils literal notranslate"><span class="pre">R2D_Workflow.py</span></code>.</p>
</div>
<p>The interaction between the front-end and the back-end is best understood by looking at the sequence of events that occurs when the user presses the <code class="docutils literal notranslate"><span class="pre">Run</span></code> button. As shown in the figure below, the UI application will first perform several steps:</p>
<ol class="arabic simple">
<li><p>It will create a temporary directory in the Documents folder named <code class="docutils literal notranslate"><span class="pre">tmp.SimCenter</span></code>, and inside <code class="docutils literal notranslate"><span class="pre">tmp.SimCenter</span></code> will create another directory <code class="docutils literal notranslate"><span class="pre">templatedir</span></code>.</p></li>
<li><p>It will then run through all the currently selected widgets and on each invoke the <code class="docutils literal notranslate"><span class="pre">copyFiles()</span></code> method, telling these widgets to copy all files that will be needed during the workflow to the <code class="docutils literal notranslate"><span class="pre">templatedir</span></code> directory.</p></li>
<li><p>It will then create a JSON file and will run through the currently selected widgets and on each invoke the methods <code class="docutils literal notranslate"><span class="pre">outputToJSON()</span></code> and <code class="docutils literal notranslate"><span class="pre">outputAppDataToJSON</span></code>, these telling the application to augment the JSON file with the inputs the user has provided in the widget and also the name of the widget.</p></li>
<li><p>The UI will now start the backend application and will spin until the backend application returns with a completion signal.</p></li>
</ol>
<p>Now that the UI has been handed over to the backend application, the backend application will perform the following:</p>
<ol class="arabic simple" start="5">
<li><p>Open the output file from the UI and parse it to obtain the name of the application to run and the arguments to run the application with. Open up another file, the <code class="docutils literal notranslate"><span class="pre">WorkflowApplications.json</span></code> file, contained with the application, to determine given the application name the full path to the executable to be invoked. It will then create in <code class="docutils literal notranslate"><span class="pre">templatedir</span></code> a file named <code class="docutils literal notranslate"><span class="pre">workflow_driver</span></code>. This file is a script file that when run by the UQ engine will generate a file named <code class="docutils literal notranslate"><span class="pre">results.out</span></code>. <code class="docutils literal notranslate"><span class="pre">results.out</span></code> when the <code class="docutils literal notranslate"><span class="pre">workflow_driver</span></code> script has completed will contain a single line of space-separated values, one value for each EDP.</p></li>
<li><p>It will invoke each of the applications with supplied arguments and an additional command line argument, <code class="docutils literal notranslate"><span class="pre">--getRV</span></code>, to inform the application to process the input file, and to create any additional random variables and input files needed before the workflow runs.</p></li>
<li><p>It will then launch the UQengine. The UQengine, is typically a pre- and post-processor to an existing UQ engine.</p></li>
<li><p>The pre-processor takes the json input file and creates an input file needed by the actual UQ engine.</p></li>
<li><p>The preprocessor will launch the UQ application. This application will typically run the <code class="docutils literal notranslate"><span class="pre">workflow_driver</span></code> many times, passing as input to the workflow a file <code class="docutils literal notranslate"><span class="pre">\params</span></code> and obtaining as output from the <code class="docutils literal notranslate"><span class="pre">workflow_driver</span></code> a file <code class="docutils literal notranslate"><span class="pre">results.out</span></code>.</p></li>
<li><p>When done the engine will output its results.</p></li>
<li><p>The UQengine will notify the UQpreprocessor that it is done.</p></li>
<li><p>The UQpreprocessor will notify the femUQ application that it is done.</p></li>
<li><p>The femUQ application will notify the UI that it is done.</p></li>
<li><p>The UI will read the results and present them to the user.</p></li>
</ol>
<figure class="align-center" id="c4model-figsequencelocal">
<a class="reference internal image-reference" href="../../../../_images/sequenceLocal.png"><img alt="../../../../_images/sequenceLocal.png" src="../../../../_images/sequenceLocal.png" style="width: 800px;" />
</a>
<figcaption>
<p><span class="caption-number">Fig. 2.2.4.1 </span><span class="caption-text">Sequence diagram showing what happens when a workflow runs locally.</span><a class="headerlink" href="#c4model-figsequencelocal" title="Link to this image"></a></p>
</figcaption>
</figure>
<p>That is for the case where the computations are performed on the local computer. When the computations are
performed remotely the steps are different. The first 8 steps are the same. But now the UQwrapper will not
start the UQ engine. Instead, control is returned to the UI. The UI will, as shown in the following: (11)
Compress the temporary folder. (12) Send the compressed folder to the remote HPC, shown in <a class="reference internal" href="#c4model-figsequenceremote"><span class="std std-numref">Fig. 2.2.4.2</span></a>. (13) Start an application to perform the computations. All the remote data transfer and application invocation is down through a cloud service. The <a class="reference external" href="https://tapis-project.org/">TACC tapis</a> interface is used to provide SimCenter users with access to the TACC HPC resources through the DesignSafe portal.</p>
<figure class="align-center" id="c4model-figsequenceremote">
<a class="reference internal image-reference" href="../../../../_images/sequenceRemote.png"><img alt="../../../../_images/sequenceRemote.png" src="../../../../_images/sequenceRemote.png" style="width: 800px;" />
</a>
<figcaption>
<p><span class="caption-number">Fig. 2.2.4.2 </span><span class="caption-text">Sequence diagram showing what happens when a workflow runs remotely.</span><a class="headerlink" href="#c4model-figsequenceremote" title="Link to this image"></a></p>
</figcaption>
</figure>
<p>Below we visualize aspects of SimCenter software via schematics. These are mostly UML diagrams showing how the applications are built. The SimCenter releases a number of front-end applications: EE-UQ shown in <a class="reference internal" href="#figumlee"><span class="std std-numref">Fig. 2.2.5.1</span></a>, WE-UQ shown in <a class="reference internal" href="#figumlwe"><span class="std std-numref">Fig. 2.2.6.1</span></a>, and PBE shown in <a class="reference internal" href="#figumlpbe"><span class="std std-numref">Fig. 2.2.8.1</span></a>. These applications share code with each other and other SimCenter applications. As a consequence, the common code is bundled into a number of shared packages: EarthquakeEvents shown in <a class="reference internal" href="#figumlearthquakeevents"><span class="std std-numref">Fig. 2.2.9.1</span></a>, WindEvents shown in <a class="reference internal" href="#figumlwindevents"><span class="std std-numref">Fig. 2.2.10.1</span></a>, and SimCenterCommon shown in <a class="reference internal" href="#figumlcommon"><span class="std std-numref">Fig. 2.2.12.1</span></a>. A number of packages were chosen over placing all common code inside a single package to simplify development efforts for outside programmers (whom it is envisioned will mostly be adding new event components) and to reduce the overhead of package management and compile time for SimCenter programmers. UML diagrams are presented for these front-end applications and shared packages. THE UML diagrams that are presented are not exhaustive, in that they do not show all classes used, for it was decided not to for example show the myriad of Line edits, labels, spin boxes, etc. that make up the widgets. What is shown is sufficient to present the SimCenter architecture.</p>
<p>While there are a number of different types of UML diagrams, those shown below are limited to class diagrams and sequence diagrams. SimCenter applications are object-oriented in nature. An object-oriented program consists of objects interacting with one another,  with each object being of a certain type or class. A class diagram shows the classes, their attributes and methods, and the relationships between the classes. A sequence diagram or event diagram shows the order in which objects interact. To understand the SimCenter framework it is useful to first present the main() function for a SImCenter application, in this case, EE-UQ, shown in <code class="xref std std-numref docutils literal notranslate"><span class="pre">codeMainCode</span></code>. The code presented is a stripped-down version of the actual code, code for dealing with style sheets, analytics, etc. is not shown as it is not pertinent to understanding the software architecture.</p>
<div class="highlight-default notranslate" id="codemaincode"><div class="highlight"><pre><span></span><span class="nb">int</span> <span class="n">main</span><span class="p">(</span><span class="nb">int</span> <span class="n">argc</span><span class="p">,</span> <span class="n">char</span> <span class="o">*</span><span class="n">argv</span><span class="p">[])</span> <span class="p">{</span>

  <span class="n">QApplication</span> <span class="n">app</span><span class="p">(</span><span class="n">argc</span><span class="p">,</span> <span class="n">argv</span><span class="p">);</span>

 <span class="o">//</span>
 <span class="o">//</span> <span class="n">create</span> <span class="n">a</span> <span class="n">remote</span> <span class="n">interface</span>
 <span class="o">//</span>

 <span class="n">QString</span> <span class="n">tenant</span><span class="p">(</span><span class="s2">&quot;designsafe&quot;</span><span class="p">);</span>
 <span class="n">QString</span> <span class="n">storage</span><span class="p">(</span><span class="s2">&quot;agave://designsafe.storage.default/&quot;</span><span class="p">);</span>
 <span class="n">QString</span> <span class="n">dirName</span><span class="p">(</span><span class="s2">&quot;EE-UQ&quot;</span><span class="p">);</span>

 <span class="o">//</span>
 <span class="o">//</span> <span class="n">create</span> <span class="n">the</span> <span class="n">main</span> <span class="n">window</span>
 <span class="o">//</span>

 <span class="n">WorkflowAppWidget</span> <span class="o">*</span><span class="n">theInputApp</span> <span class="o">=</span> <span class="n">new</span> <span class="n">WorkflowAppEE_UQ</span><span class="p">(</span><span class="n">theRemoteService</span><span class="p">);</span>
 <span class="n">MainWindowWorkflowApp</span> <span class="n">window</span><span class="p">(</span><span class="n">QString</span><span class="p">(</span><span class="s2">&quot;EE-UQ: Response of Building to Earthquake&quot;</span><span class="p">),</span> <span class="n">theInputApp</span><span class="p">,</span> <span class="n">theRemoteService</span><span class="p">);</span>

 <span class="n">windows</span><span class="o">.</span><span class="n">setVersion</span><span class="p">(</span><span class="s2">&quot;Version 1.0.0&quot;</span><span class="p">);</span>


 <span class="o">//</span>
 <span class="o">//</span> <span class="n">move</span> <span class="n">the</span> <span class="n">remote</span> <span class="n">interface</span> <span class="n">to</span> <span class="n">a</span> <span class="n">thread</span>
 <span class="o">//</span>

 <span class="n">QThread</span> <span class="o">*</span><span class="n">thread</span> <span class="o">=</span> <span class="n">new</span> <span class="n">QThread</span><span class="p">();</span>
 <span class="n">theRemoteService</span><span class="o">-&gt;</span><span class="n">moveToThread</span><span class="p">(</span><span class="n">thread</span><span class="p">);</span>
 <span class="n">thread</span><span class="o">-&gt;</span><span class="n">start</span><span class="p">();</span>

 <span class="o">//</span>
 <span class="o">//</span> <span class="n">show</span> <span class="n">the</span> <span class="n">main</span> <span class="n">window</span><span class="p">,</span> <span class="nb">set</span> <span class="n">styles</span> <span class="o">&amp;</span> <span class="n">start</span> <span class="n">the</span> <span class="n">event</span> <span class="n">loop</span>
 <span class="o">//</span>

 <span class="n">window</span><span class="o">.</span><span class="n">show</span><span class="p">();</span>
 <span class="nb">int</span> <span class="n">res</span> <span class="o">=</span> <span class="n">app</span><span class="o">.</span><span class="n">exec</span><span class="p">();</span>

 <span class="o">//</span>
 <span class="o">//</span> <span class="n">on</span> <span class="n">done</span> <span class="k">with</span> <span class="n">the</span> <span class="n">event</span> <span class="n">loop</span><span class="p">,</span> <span class="n">logout</span> <span class="o">&amp;</span> <span class="n">stop</span> <span class="n">the</span> <span class="n">thread</span>
 <span class="o">//</span>

 <span class="n">theRemoteService</span><span class="o">-&gt;</span><span class="n">logout</span><span class="p">();</span>
 <span class="n">thread</span><span class="o">-&gt;</span><span class="n">quit</span><span class="p">();</span>

  <span class="k">return</span> <span class="n">res</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>As was mentioned the Front end UI applications are built using Qt. In a Qt application, the programmer creates a QApplication object, in <code class="xref std std-numref docutils literal notranslate"><span class="pre">codeMainCode</span></code> the object named <cite>app</cite> and a QMainWindow, in the example named <cite>window</cite>. As will be shown in <a class="reference internal" href="#figumlcommon"><span class="std std-numref">Fig. 2.2.12.1</span></a>, MainWindowWorkflowApp is a type of QMainWindow that is used in all SimCenter research applications as it deals with all the application menu items, e.g. File open and close, Help cites, etc. The QMainWindowWorkflowApp is a SImCenter class that contains a single QWidget of type WorkflowAppWidget. The WorkflowAppWidget object is passed a RemoteService, the remote cloud service that the application will interact with. This RemoteService is placed in its own QThread object, so that the UI can respond to user requests while communication with the cloud service is underway. Once the window object is shown, control is passed to the QApplication until the user is done.</p>
</section>
<section id="uml-ee-uq">
<span id="lblumlee"></span><h2><span class="section-number">2.2.5. </span>UML EE-UQ<a class="headerlink" href="#uml-ee-uq" title="Link to this heading"></a></h2>
<p>EE-UQ is an application to determine the response of a building subjected to an earthquake event. As shown in <a class="reference internal" href="#figumlee"><span class="std std-numref">Fig. 2.2.5.1</span></a> it comprises a component selection that presents the user with a number of components, jigsaw pieces, which include: earthquake event (EarthquakeEventSelection), UQ engine (UQ Selection), demand parameters of interns (EDP Selection), building information model (BIM Selection),  structural analysis model generator (SAM Selection), finite element application (FEM Selection), and RandomVariableContainer.  RandomVariableContainer is a widget allowing user to specify distributions associated with the random variables created by a user. As will be seen in <a class="reference internal" href="#figumlearthquakeevents"><span class="std std-numref">Fig. 2.2.9.1</span></a> and <a class="reference internal" href="#figumlcommon"><span class="std std-numref">Fig. 2.2.12.1</span></a> each component offers the user a number of applications to choose from for that component. Other classes corresponding to widgets presented in the Front end UI include: UQ Result for displaying the results, Local and Remote Services for running the job locally or remotely, Remote job Manager for monitoring job status and retrieving old jobs, and Login for obtaining credentials from DesignSafe to access and run jobs on the HPC resources. All communication between the applications and DesignSafe-ci is through the Application Service. This is done to allow the applications to switch to other cloud service providers, possibly allowing applications to run at DesignSafe, on Amazon EC-2, IBM’s Azure or elsewhere.</p>
<figure class="align-center" id="id2">
<span id="figumlee"></span><img alt="../../../../_images/umlEE.png" src="../../../../_images/umlEE.png" />
<figcaption>
<p><span class="caption-number">Fig. 2.2.5.1 </span><span class="caption-text">UML Diagram for EU-UQ</span><a class="headerlink" href="#id2" title="Link to this image"></a></p>
</figcaption>
</figure>
</section>
<section id="uml-we-uq">
<span id="lblumlwe"></span><h2><span class="section-number">2.2.6. </span>UML WE-UQ<a class="headerlink" href="#uml-we-uq" title="Link to this heading"></a></h2>
<p>Similar in construction to EE-UQ is WE-UQ, as shown in figure <a class="reference internal" href="#figumlwe"><span class="std std-numref">Fig. 2.2.6.1</span></a>.  In fact, the only difference is that Wind Event Selection is present in the component selection, instead of Earthquake Events. The wind event applications, as will be shown in <a class="reference internal" href="#figumlwindevents"><span class="std std-numref">Fig. 2.2.10.1</span></a> include stochastic wind models, wind loading from online services such as Vortex-Winds, applications that take online wind tunnel experimental datasets such as those from Tokyo Polytechnic.</p>
<figure class="align-center" id="id3">
<span id="figumlwe"></span><img alt="../../../../_images/umlWE.png" src="../../../../_images/umlWE.png" />
<figcaption>
<p><span class="caption-number">Fig. 2.2.6.1 </span><span class="caption-text">UML diagram for WE-UQ.</span><a class="headerlink" href="#id3" title="Link to this image"></a></p>
</figcaption>
</figure>
</section>
<section id="uml-hydrouq">
<h2><span class="section-number">2.2.7. </span>UML HydroUQ<a class="headerlink" href="#uml-hydrouq" title="Link to this heading"></a></h2>
<p>Similar in construction to EE-UQ is HydroUQ, as shown in figure <a class="reference internal" href="#figumlhydrouq"><span class="std std-numref">Fig. 2.2.7.1</span></a>.  In fact, the only difference is that Hydro Event Selection is present in the component selection, instead of Earthquake Events. The hydrodynamic event applications, as will be shown in <a class="reference internal" href="#figumlhydroevents"><span class="std std-numref">Fig. 2.2.11.1</span></a> include stochastic wave models, tsunami loading from online services, digital wave flumes, and more.</p>
<figure class="align-center" id="id4">
<span id="figumlhydrouq"></span><img alt="../../../../_images/umlHydroUQ.png" src="../../../../_images/umlHydroUQ.png" />
<figcaption>
<p><span class="caption-number">Fig. 2.2.7.1 </span><span class="caption-text">UML diagram for HydroUQ.</span><a class="headerlink" href="#id4" title="Link to this image"></a></p>
</figcaption>
</figure>
</section>
<section id="uml-pbe">
<span id="lblumlpbe"></span><h2><span class="section-number">2.2.8. </span>UML PBE<a class="headerlink" href="#uml-pbe" title="Link to this heading"></a></h2>
<p>PBE is a tool for performance-based engineering. Given a building and an event, it will calculate downtime and loss estimates. As can be seen in <a class="reference internal" href="#figumlpbe"><span class="std std-numref">Fig. 2.2.8.1</span></a>,  it adds a LossModelSelection to the component Selections available in EE-UQ.
The Loss Model applications currently available for selection include a P58 Loss Model and a HAZUS Loss Model. Depending on selection, different widgets are presented for the user to input the different input arguments needed for the different loss model calculations. Presently the calculations for both loss models are performed by the same Python script, CalculateDL.py, in the collection of backend applications.</p>
<figure class="align-center" id="id5">
<span id="figumlpbe"></span><img alt="../../../../_images/umlPBE.png" src="../../../../_images/umlPBE.png" />
<figcaption>
<p><span class="caption-number">Fig. 2.2.8.1 </span><span class="caption-text">UML diagram for PBE.</span><a class="headerlink" href="#id5" title="Link to this image"></a></p>
</figcaption>
</figure>
</section>
<section id="uml-earthquakeevents">
<span id="lblumlearthquakeevents"></span><h2><span class="section-number">2.2.9. </span>UML EarthquakeEvents<a class="headerlink" href="#uml-earthquakeevents" title="Link to this heading"></a></h2>
<p>The Earthquake Events package, as shown in <a class="reference internal" href="#figumlearthquakeevents"><span class="std std-numref">Fig. 2.2.9.1</span></a>, contains an Earthquake Event selector with several Earthquake Event selections available. The selections include options that interface with the NGA west server directly and options that will collect inputs for stochastic input models of Vlachos et Al or Dabahi and DerKiuerghian, peer NGA records, site response and our SimCenterEvent format. Each of these widgets corresponds to one application in the backend, e.g. RockOutcrop corresponds to SiteResponse, and it is this application that will run when the workflow runs.</p>
<figure class="align-center" id="id6">
<span id="figumlearthquakeevents"></span><img alt="../../../../_images/umlEarthquakeEvents.png" src="../../../../_images/umlEarthquakeEvents.png" />
<figcaption>
<p><span class="caption-number">Fig. 2.2.9.1 </span><span class="caption-text">UML diagram for earthquake events.</span><a class="headerlink" href="#id6" title="Link to this image"></a></p>
</figcaption>
</figure>
</section>
<section id="uml-windevents">
<span id="lblumlwindevents"></span><h2><span class="section-number">2.2.10. </span>UML WindEvents<a class="headerlink" href="#uml-windevents" title="Link to this heading"></a></h2>
<p>Similar to the Earthquake Events package, the wind events package shown in <a class="reference internal" href="#figumlwindevents"><span class="std std-numref">Fig. 2.2.10.1</span></a>, contains a Wind Event Selector with a number of Wind Event selections available. The selections include options for stochastically generated wind events, events that obtain wind loading from the vortex-winds server, and options to obtain forces from wind tunnel events, either from the Tokyo Polytechnic University database or a user-supplied file.</p>
<figure class="align-center" id="id7">
<span id="figumlwindevents"></span><img alt="../../../../_images/umlWindEvents.png" src="../../../../_images/umlWindEvents.png" />
<figcaption>
<p><span class="caption-number">Fig. 2.2.10.1 </span><span class="caption-text">UML diagram for wind events.</span><a class="headerlink" href="#id7" title="Link to this image"></a></p>
</figcaption>
</figure>
</section>
<section id="uml-hydroevents">
<span id="lblumlhydroevents"></span><h2><span class="section-number">2.2.11. </span>UML HydroEvents<a class="headerlink" href="#uml-hydroevents" title="Link to this heading"></a></h2>
<p>Similar to the Earthquake Events package, the hydrodynamic events package shown in <a class="reference internal" href="#figumlhydroevents"><span class="std std-numref">Fig. 2.2.11.1</span></a>, contains a Hydrodynamic Event Selector with a number of Hydrodynamic Event selections available. The selections include options for stochastically generated wave events, 3D CFD events, and more.</p>
<figure class="align-center" id="id8">
<span id="figumlhydroevents"></span><img alt="../../../../_images/umlHydroEvents.png" src="../../../../_images/umlHydroEvents.png" />
<figcaption>
<p><span class="caption-number">Fig. 2.2.11.1 </span><span class="caption-text">UML diagram for hydrodynamic events.</span><a class="headerlink" href="#id8" title="Link to this image"></a></p>
</figcaption>
</figure>
</section>
<section id="uml-simcentercommon">
<span id="lblsimcentercommon"></span><h2><span class="section-number">2.2.12. </span>UML SimCenterCommon<a class="headerlink" href="#uml-simcentercommon" title="Link to this heading"></a></h2>
<p>SimCenter common shown in <a class="reference internal" href="#figumlcommon"><span class="std std-numref">Fig. 2.2.12.1</span></a> contains a number of component selections, BIM selection, EDP Selection, SAM Selection, FEM Selection and UQ Engine Selection. Each contains a number of options. The components and their options are all subclasses of the SImCenterAppWidget class, The SImCenterAppWidget has methods to output and input from a JSON object. SimCenterCommon also contains the RandomVariablesContainer class, each object being a container for several RandomVariables. Each RansomVariable has a name and a RandomVariable Distribution associated with it. Types of RandomVariableDistributions include for example Normal, Lognormal, Uniform, Beta, and Gumbel.</p>
<figure class="align-center" id="id9">
<span id="figumlcommon"></span><img alt="../../../../_images/umlCommon.png" src="../../../../_images/umlCommon.png" />
<figcaption>
<p><span class="caption-number">Fig. 2.2.12.1 </span><span class="caption-text">UML diagram for SimCenter common.</span><a class="headerlink" href="#id9" title="Link to this image"></a></p>
</figcaption>
</figure>
</section>
<section id="uml-simcenterbackendapplications">
<span id="lblsimcenterbackendapplications"></span><h2><span class="section-number">2.2.13. </span>UML SimCenterBackendApplications<a class="headerlink" href="#uml-simcenterbackendapplications" title="Link to this heading"></a></h2>
<p>The BackendApplications are currently all in a single package. These are the applications that perform the numerical computations when the workflow runs. Some of these applications rely on external applications, websites, and external packages.  The external applications, web services, and libraries are as shown in <a class="reference internal" href="#figappdiagrambackend"><span class="std std-numref">Fig. 2.2.13.1</span></a>.</p>
<figure class="align-center" id="id10">
<span id="figappdiagrambackend"></span><img alt="../../../../_images/appDiagramBackend.png" src="../../../../_images/appDiagramBackend.png" />
<figcaption>
<p><span class="caption-number">Fig. 2.2.13.1 </span><span class="caption-text">Applications for backend applications.</span><a class="headerlink" href="#id10" title="Link to this image"></a></p>
</figcaption>
</figure>
</section>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, The Regents of the University of California.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
    <!-- Theme Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-158130480-2"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-158130480-2', {
          'anonymize_ip': false,
      });
    </script>  

  <style>
         .wy-nav-content { max-width: none; }
  </style>

<script>
    /*
    let selectedFilters = [];
    const images  = document.getElementsByClassName("gallery-item");
    const filters = [...document.querySelectorAll('.filter select')];
    const toggles = [...document.querySelectorAll('.filter input')];

    var show = function (elem) {
        elem.style.display = 'block';
    };
    var hide = function (elem) {
        elem.style.display = 'none';
    };
    var toggleFilter =  function(el,elid) {
        const filter = document.getElementById(elid);
        filter.disabled = !el.checked;
       
        if ("createEvent" in document) {
            var evt = document.createEvent("HTMLEvents");
            evt.initEvent("change", false, true);
            filter.dispatchEvent(evt);
        }
        else
            filter.fireEvent("change");
    };
    
    for (const filter of filters) {
        filter.addEventListener('change', function(event) {
            selectedFilters = filters.map(filter => filter.disabled ? '' : filter.value).filter(Boolean);
            console.log(selectedFilters);
            for (const image of images) {
                if (selectedFilters.every(filter => image.classList.contains(filter))) {
                    show(image);
                }
                else {hide(image)};
            };
        })
    };
    */
</script>


</body>
</html>